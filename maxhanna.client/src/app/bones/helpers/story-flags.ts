import { events } from './events';
export interface Scenario { string: string[]; requires?: string[]; bypass?: string[]; addsFlag?: string; canSelectItems?: boolean; portraitFrame?: number; }
class StoryFlags { flags: Map<string, boolean> = new Map(); add(flag: string) { this.flags.set(flag, true); } contains(flag: string) { return this.flags.has(flag); } getRelevantScenario(scenarios: Scenario[]) { return scenarios.find(scenario => { const bypassFlags = scenario.bypass ?? []; for (let i = 0; i < bypassFlags.length; i++) { if (this.flags.has(bypassFlags[i])) return false; } const requiredFlags = scenario.requires ?? []; for (let i = 0; i < requiredFlags.length; i++) { if (!this.flags.has(requiredFlags[i])) return false; } return true; }); } }
export const CHARACTER_CREATE_STORY_TEXT_1 = 'CHARACTER_CREATE_STORY_TEXT_1'; export const CHARACTER_CREATE_STORY_TEXT_2 = 'CHARACTER_CREATE_STORY_TEXT_2'; export const CHARACTER_CREATE_STORY_TEXT_3 = 'CHARACTER_CREATE_STORY_TEXT_3'; export const CHARACTER_CREATE_STORY_TEXT_4 = 'CHARACTER_CREATE_STORY_TEXT_4'; export const CHARACTER_CREATE_STORY_TEXT_5 = 'CHARACTER_CREATE_STORY_TEXT_5'; export const CHARACTER_CREATE_STORY_TEXT_6 = 'CHARACTER_CREATE_STORY_TEXT_6'; export const CHARACTER_CREATE_STORY_TEXT_7 = 'CHARACTER_CREATE_STORY_TEXT_7'; export const CHARACTER_CREATE_STORY_TEXT_8 = 'CHARACTER_CREATE_STORY_TEXT_8'; export const GOT_FIRST_METABOT = 'GOT_FIRST_METABOT'; export const GOT_WATCH = 'GOT_WATCH'; export const TALKED_TO_A = 'TALKED_TO_A'; export const TALKED_TO_B = 'TALKED_TO_B'; export const TALKED_TO_BRUSH_SHOP_OWNER0 = 'TALKED_TO_BRUSH_SHOP_OWNER0'; export const TALKED_TO_BRUSH_SHOP_OWNER1 = 'TALKED_TO_BRUSH_SHOP_OWNER1'; export const TALKED_TO_BRUSH_SHOP_OWNER2 = 'TALKED_TO_BRUSH_SHOP_OWNER2'; export const TALKED_TO_MOM_ABOUT_DAD = 'TALKED_TO_MOM_ABOUT_DAD'; export const TALKED_TO_MOM_ABOUT_DAD2 = 'TALKED_TO_MOM_ABOUT_DAD2'; export const TALKED_TO_MOM_ABOUT_WATCH = 'TALKED_TO_MOM_ABOUT_WATCH'; export const TALKED_TO_MOM = 'TALKED_TO_MOM'; export const TALKED_TO_SKILL_PERSON = 'TALKED_TO_SKILL_PERSON'; export const TALKED_TO_SKILL_PERSON_2 = 'TALKED_TO_SKILL_PERSON_2'; export const START_FIGHT = 'START_FIGHT'; export const storyFlags = new StoryFlags();
