<div class="componentMain">
  <div class="closeButton" (click)="remove_me('NotepadComponent');"></div> 
  <div class="componentTitle">Notepad</div>
  <div class="popupPanel" *ngIf="isPanelExpanded"> 
    <div class="sharedWithWrapperDiv">
      <div class="popupPanelTitle">
        Share Note (id# {{ noteId.value }})? 
        <div *ngIf="splitNoteOwnershipUsers && splitNoteOwnershipUsers.length > 0" class="smallFont">Currently shared with:</div>
      </div>
      <div *ngFor="let user of splitNoteOwnershipUsers" class="sharedUserRow">
        <app-user-tag [user]="user" 
        [inputtedParentRef]="parentRef" 
        [displayMiniTag]="true"
        [previousComponent]="'Notepad'"></app-user-tag>
  <button *ngIf="isOriginalOwner()" class="unshareButton" (click)="unshareUser(user.id!)">Unshare</button>
      </div>
    </div>
    <app-user-list (userClickEvent)="shareNote($event);"
                   [user]="parentRef?.user!"
                   [sharingSearch]="true"
                   [inputtedParentRef]="parentRef">
    </app-user-list>
  </div>


  <textarea #noteInput class="noteInputTextArea" (input)="handleNoteInputChange()" required></textarea>
  <fieldset class="buttonFields">
    <small  class="autoSyncedIndicator" *ngIf="lastSyncedAt">Auto-synced at {{ lastSyncedAt | date:'mediumTime' }}</small>
    <input type="submit" value="üíæ" (click)="addNote(); noteAddButton.disabled=true;" #noteAddButton title="Save Note" />
    <input type="submit" value="‚ÜóÔ∏è" (click)="shareNoteButtonClick()" #shareNoteButton title="Share Note" />
    <input type="submit" value="üÜï" (click)="clearInputs()" #newNoteButton title="New Note" />
    <input type="submit" value="‚ùå" (click)="deleteNote()" #deleteNoteButton title="Delete Note" />
    <input type="hidden" value="" #noteId />
  </fieldset> 
  
  <div *ngIf="(notes && notes.length > 0) || (searchInput && searchInput.nativeElement && searchInput.nativeElement.value)" class="searchBar">
    <input placeholder="Search" #searchInput (keyup)="search()" />
    <button (click)="search()">üîç</button>
    <button (click)="toggleCarouselPopup()">{{ isCarouselPopped ? 'Close Notes' : 'Pop Notes' }}</button>
  </div>
  <div [style.gap]="isCarouselPopped ? '5px' : ''"
    [class]="isCarouselPopped ? 'popupPanel poppedUpCarouselleArea' : 'notesCarousel'">
    <div [class]="isCarouselPopped ? 'poppedUpCarouselleArea poppedUpCarouselleList' : ''">
      <label *ngFor="let note of notes" (click)="getNote(note.id!); closeCarouselPopup();">{{ note.note }}</label>
    </div>
    <button *ngIf="isCarouselPopped" class="closeButton" (click)="closeCarouselPopup()" id="closeOverlay">Close</button>
  </div> 
</div>
