<div class="componentMain">
  <div class="closeButton" (click)="remove_me('UpdateUserProfile')"></div>
  <div class="refreshButton" (click)="ngOnInit()"></div>
  <div class="componentTitle">Settings</div>


  <input type="submit" value="Delete Account üóëÔ∏è" (click)="deleteUser()" title="Delete Account" />

  <div *ngIf="parentRef!.user" style="margin-top:15px">
    <fieldset>
      <legend>Update:</legend>
      <table class="mainTable">

        <!--USERNAME / PASSWORD-->
        <thead (click)="isGeneralToggled = !isGeneralToggled">
          <tr>
            <th>
              <span class="helperSpanTitle" title="Change your username or password."></span>
            </th>
            <th>General</th>
            <th style="text-align:right;">
              <button (click)="updateUser()" title="Update settings" [disabled]="!isGeneralToggled">üîÑ</button>
            </th>
          </tr>
        </thead>
        <tbody *ngIf="isGeneralToggled">
          <tr>
            <td>Name:</td>
            <td><input type="text" placeholder="New Username" #updatedUsername [value]="parentRef!.user!.username" /></td>
          </tr>
          <tr>
            <td>Password:</td>
            <td><input type="password" placeholder="New Password" #updatedPassword [value]="parentRef!.user!.pass" /></td>
          </tr>
        </tbody>


        <!-- Menu Icons -->
        <thead (click)="isMenuIconsToggled = !isMenuIconsToggled; getMenuIcons()">
          <tr>
            <th>
              <span class="helperSpanTitle" title="Add / Remove icons from your menu."></span>
            </th>
            <th colspan="2">Selectable Menu Items</th>
          </tr>
        </thead>
        <tbody *ngIf="isMenuIconsToggled">
          <tr>
            <td></td>
            <td>Menu:</td>
            <td class="">
              <table class="mainTable">
                <thead>
                  <tr>
                    <th colspan="3">Menu Item</th>
                  </tr>
                </thead>
                <tbody *ngIf="selectableIcons">
                  <tr *ngFor="let icon of selectableIcons" (click)="selectMenuIcon(icon.title)">
                    <td>
                      <input type="checkbox"
                             [checked]="menuIconsIncludes(icon.title)" />
                    </td>
                    <td>{{ icon.title == 'Weather' ? '‚òÄÔ∏è' : icon.icon }}</td>
                    <td>{{ icon.title }}</td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </tbody>

        <!--Weather-->
        <thead (click)="isWeatherLocationToggled = !isWeatherLocationToggled; getWeatherLocation()">
          <tr>
            <th>
              <span class="helperSpanTitle" title="Default is to automatically update your weather based on your IP address,
but you can also set your own City for a more precise location."></span>
            </th>
            <th>Weather Location</th>
            <th style="text-align:right;">
              <button (click)="updateWeatherLocation()" title="Update settings" [disabled]="!isWeatherLocationToggled">üîÑ</button>
            </th>
          </tr>
        </thead>
        <tbody *ngIf="isWeatherLocationToggled">
          <tr>
            <td></td>
            <td>Location:</td>
            <td><input type="text" placeholder="IP Address/City (ex: 'Montreal')" #weatherLocationInput /></td>
          </tr>
        </tbody>


        <!--Nicehash API-->
        <thead (click)="isNicehashApiKeysToggled = !isNicehashApiKeysToggled; getNicehashApiKeys()">
          <tr>
            <th><span class="helperSpanTitle" title="These API Keys enable Nicehash support. A system for mining cryptocurrency."></span></th>
            <th>Nicehash API Keys</th>
            <th style="text-align:right;">
              <button (click)="updateNHAPIKeys()" title="Update settings" [disabled]="!isNicehashApiKeysToggled">üîÑ</button>
            </th>
          </tr>
        </thead>
        <tbody *ngIf="isNicehashApiKeysToggled">
          <tr>
            <td></td>
            <td>OrgId:</td>
            <td><input type="text" placeholder="Org Id" #orgId [value]="nhApiKeys?.orgId ?? ''" /></td>
          </tr>
          <tr>
            <td></td>
            <td>ApiKey:</td>
            <td><input type="text" placeholder="API Key" #apiKey [value]="nhApiKeys?.apiKey ?? ''" /></td>
          </tr>
          <tr>
            <td></td>
            <td>ApiSecret:</td>
            <td><input type="text" placeholder="API Secret" #apiSecret [value]="nhApiKeys?.apiSecret ?? ''" /></td>
          </tr>
        </tbody>
      </table>
      <button (click)="parentRef?.createComponent('User');">Close</button>
    </fieldset>
  </div>
</div> 
