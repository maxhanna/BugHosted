<div class=componentMain>
  <div class="closeButton" (click)="remove_me();"></div>
  <div class="refreshButton" (click)="ngOnInit();"></div>

  <table width=100%>
    <tr width=100%>
      <td width=33% style="border: 1px royalblue dotted;" (click)="monthBackClick();">
        <a href=#><div #monthBack>{{ this.getMonthName(monthBackFromNow) }}</div><div #yearBack>{{ monthBackFromNow.getFullYear() }}</div></a>
      </td>
      <td width=33%>
        <div #month>{{ this.getMonthName(now) }}</div><div #year>{{ now.getFullYear() }}</div>
      </td>
      <td width=33% style="border: 1px royalblue dotted;" (click)="monthForwardClick();">
        <a href=#><div #monthForward>{{ this.getMonthName(monthForwardFromNow) }}</div><div #yearForward>{{ monthForwardFromNow.getFullYear() }}</div></a>
      </td>
    </tr>
  </table>
  <table align=center border=1 width=90% height=95% class=table>
    <tr width=100% height=50>
      <td width=14% height=50>Sunday</td>
      <td width=14% height=50>Monday</td>
      <td width=14% height=50>Tuesday</td>
      <td width=14% height=50>Wednesday</td>
      <td width=14% height=50>Thursday</td>
      <td width=14% height=50>Friday</td>
      <td width=14% height=50>Saturday</td>
    </tr>
    <tr>
      <td *ngFor="let cal of calendarDays.slice(0,7)"
          (click)="getCalendarDetails(cal);"
          [ngClass]="{'currentDay': cal.date?.getDate() === currentDate.getDate() && cal.date?.getMonth() === currentDate.getMonth() && cal.date?.getFullYear() === currentDate.getFullYear()}">
        {{ cal.date?.getDate() }}{{ convertSymbols(cal.symbols!) }}
      </td>
    </tr>
    <tr>
      <td *ngFor="let cal of calendarDays.slice(7,14)"
          (click)="getCalendarDetails(cal);"
          [ngClass]="{'currentDay': cal.date?.getDate() === currentDate.getDate() && cal.date?.getMonth() === currentDate.getMonth() && cal.date?.getFullYear() === currentDate.getFullYear()}">
        {{ cal.date?.getDate() }}{{ convertSymbols(cal.symbols!) }}
      </td>
    </tr>
    <tr>
      <td *ngFor="let cal of calendarDays.slice(14,21)"
          (click)="getCalendarDetails(cal);"
          [ngClass]="{'currentDay': cal.date?.getDate() === currentDate.getDate() && cal.date?.getMonth() === currentDate.getMonth() && cal.date?.getFullYear() === currentDate.getFullYear()}">
        {{ cal.date?.getDate() }}{{ convertSymbols(cal.symbols!) }}
      </td>
    </tr>
    <tr>
      <td *ngFor="let cal of calendarDays.slice(21,28)"
          (click)="getCalendarDetails(cal);"
          [ngClass]="{'currentDay': cal.date?.getDate() === currentDate.getDate() && cal.date?.getMonth() === currentDate.getMonth() && cal.date?.getFullYear() === currentDate.getFullYear()}">
        {{ cal.date?.getDate() }}{{ convertSymbols(cal.symbols!) }}
      </td>
    </tr>
    <tr>
      <td *ngFor="let cal of calendarDays.slice(28,35)"
          (click)="getCalendarDetails(cal);"
          [ngClass]="{'currentDay': cal.date?.getDate() === currentDate.getDate() && cal.date?.getMonth() === currentDate.getMonth() && cal.date?.getFullYear() === currentDate.getFullYear()}">
        {{ cal.date?.getDate() }}{{ convertSymbols(cal.symbols!) }}
      </td>
    </tr>
    <tr>
      <td *ngFor="let cal of calendarDays.slice(35,42)"
          (click)="getCalendarDetails(cal);"
          [ngClass]="{'currentDay': cal.date?.getDate() === currentDate.getDate() && cal.date?.getMonth() === currentDate.getMonth() && cal.date?.getFullYear() === currentDate.getFullYear()}">
        {{ cal.date?.getDate() }}{{ convertSymbols(cal.symbols!) }}
      </td>
    </tr>
  </table>
  <div *ngIf="!!selectedDate" class="calendarDetail">
    <div>{{selectedDate!.date}}</div>
    <table>
      <tr *ngFor="let cal of selectedCalendarEntries">
        <td>{{cal.date | date:'shortTime'}}</td>
        <td>{{cal.type}}</td>
        <td>
          {{ cal.type !== "Milestone" ? cal.note : (cal.date ? '(' + cal.date.toString().substring(0, cal.date.toString().indexOf('-')) + ') ' + cal.note : cal.note) }}
        </td>




        <td><input type="button" value="❌" (click)="deleteCalendarEntry(cal!);" /></td>
      </tr>
    </table>
    <fieldset>
      <input #calendarNoteEntry type="text" placeholder="Description" required />
      <select #calendarTypeEntry>
        <ng-container *ngFor="let eventType of getEventTypes()">
          <option>{{ eventType }}</option>
        </ng-container>
      </select>
      <input #calendarTimeEntry type="time" value="00:00" />
      <input type="button" (click)="validateNoteEntry()" value="💾" />
    </fieldset>
  </div>
</div>
